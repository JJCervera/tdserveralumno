<!DOCTYPE html>

<!-- COMO FINALIDAD DE HACER QUE EL DESBLOQUEO POR PARTE DEL ALUMNO SEA LO MAS FÁCIL E INTUITIVO POSIBLE
	Y, DEBIDO AL PROBLEMA CONSTANTE DE BLOQUEO DE LAS NETBOOKS POR EL PROBLEMA DE LA FALLA DE LA PILA INTERNA,
	ME PROPUSE EN REALIZAR UNA PÁGINA PARA ANEXARLA A UN SERVIDOR APACHE SECUNDARIO PARA QUE LOS ALUMNOS 
	PUEDAN ELLOS MISMOS DESBLOQUEAR SUS PROPIAS NETBOOKS DE UNA FORMA MAS DIRECTA QUE LA SERIE DE PASOS
	QUE SOLICITA EL TDSERVER PARA ALUMNOS.

	ESTE CONJUNTO DE CÓDIGO NO COMPROMETE LA SEGURIDAD DEL SERVIDOR TDSERVER, YA QUE EN CASO DE TENER QUE 
	IMPEDIR EL DESBLOQUEO DE ALGUNA NETBOOK, EL TDSERVER CUENTA CON LA OPCIÓN DE MARCARLA COMO "ROBADA" 
	Y DE ESTA FORMA NO SE LE PUEDA GENERAR LOS CÓDIGOS DE DESBLOQUEO.
	
	VER LA SECCIÓN DE DECLARACIÓN DE LOS VALORES DE LAS VARIABLES Y MODIFICAR LOS VALORES A LA NECESIDAD.
	
	TENER EN CUENTA QUE YA TENEMOS QUE TENER GENERADA UNA CUENTA COMO ALUMNO PARA PODER REALIZAR EL INGRESO
	MEDIANTE EL MAC DE ESTE Y SU CONTRASEÑA, POR RAZONES DE SEGURIDAD ES TOTALMENTE RECOMENDABLE QUE NOS
	BASEMOS EN UNA NETBOOK QUE LA TENGAMOS EN DESUSO PARA GENERAR LA CUENTA Y CONTRASEÑA.
	
		
	JUAN JOSÉ CERVERA ADMIN/RTE/FTE BOP22 Y BOP20 MISIONES ARGENTINA - 05/09/2018
	rte.bop22@gmail.com 
-->
<html>

<html lang="es">
<meta charset="utf-8">


<body>
<title>DESBLOQUEOS</title>

<!-- 	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> -->
<meta http-equiv="refresh" content="600" >

<!--  Dummy Frame para mantener la sesión abierta en el tdserver para alumnos -->
<iframe width="0" height="0" border="0" name="dummyframe" id="dummyframe"></iframe>	


<!--  al cargar la pagina se realiza el logueo al tdserver para alumnos de forma automática -->
<body onload="javascript:login_tdserver();" target="dummyframe">

<script>
// 	***************************************************************************	
// 	* declaración de variables (de ser necesario, reemplazar los valores acá) *
// 	***************************************************************************

var IP_tdserver = "172.16.0.2"  			//default: 172.16.0.2
var MAC = "AABBCCDDEEFF";					//hay que crear una cuenta alumno para una MAC (recomendado de una netbook en desuso)
var contrasena = "Alumno.";					//va la contraseña generada para la cuenta del alumno de la MAC elegida
// a partir de acá no debería ser necesario cambiar nada


// función que realiza el logueo para iniciar una sesión en el tdserver para alumnos
function login_tdserver(){
	window.open("http://"+IP_tdserver+"/tdserver/student/login_deal.jsp?operatorName="+MAC+"&HWID="+MAC+"&password="+contrasena, "dummyframe");
}

// funcion para ir pasando a mayúsculas a medida que se tipea en los cuadros de texto: https://stackoverflow.com/a/37617376/7246780
function upperCaseF(a){
    setTimeout(function(){
        a.value = a.value.toUpperCase();
    }, 1);
}

// funcion que solicita la generación del código de desbloqueo al tdserver para alumnos y devuelve la respuesta en una nueva ventana flotante.
function gen_codigo(){
	var hwid = document.getElementById("hwid").value;
	var bootTick = document.getElementById("bootTick").value;

	window.open("http://"+IP_tdserver+"/tdserver/student/unlock_code_deal.jsp?hwid="+hwid+"&bootTick="+bootTick,"TU CÓDIGO","left=100,top=100,menubar=no,resizable=no,width=450,height=200");

}
</script> 


<!-- imagen de una pantalla bloqueada como guía para los alumnos   -->
<p style="text-align: left;"><img src="bloqueada.jpg" alt="pantalla de bloqueo" width="720" height="320" /></p>

<!-- formulario para datos de desbloqueo de la netbook   -->
<form>
	<b><font size="3">INGRESÁ LOS DATOS DE LA PANTALLA DE TU NETBOOK</font><br/><br/>

	Mirá la imagen superior para guiarte como cargar los datos.</b><br/><br/>
	<b><font size="2">ID de Hardware: </font></b> <input type="text" onkeydown="upperCaseF(this)" pattern="([a-fA-F\d]+){12,12}"  maxlength=12 size=12 id="hwid" name="hwid" value=""> son 12 caracteres SIN GUIONES, NI ESPACIOS<br/>
	<b><font size="2">Marca de Arranque: </font></b> <input type="text" onkeydown="upperCaseF(this)" pattern="([a-fA-F\d]+){2,4}" maxlength=4 size=4 id="bootTick" name="bootTick" value=""> los últimos 4 caracteres de la marca de arranque o boot tick<br/><br/>
	<input type="submit" onclick="gen_codigo();" value="Generar Código de Desbloqueo">
</form>
 
<p id="hwid"></p>
<p id="bootTick"></p>

			
</body>
</html>
